<div class="header">
  <div class="header-content">
    <h1>{{ title | titlecase }}</h1>
    <p class="subtitle">Demonstrating Angular Pipes with Lord of the Rings Characters</p>
  </div>
</div>

<div class="container">
  <div class="selected-character-indicator">
    <p>Currently viewing pipe examples for: <span class="highlight">{{ character.name | titlecase }}</span></p>
  </div>

  <div class="section">
    <h2>String Pipes</h2>
    <div class="card">
      <h3>uppercase</h3>
      <p>Original: {{ character.name }}</p>
      <p>Transformed: <span class="highlight">{{ character.name | uppercase }}</span></p>
      <p class="code-example"><code>{{ '{{' }} character.name | uppercase {{ '}}' }}</code></p>
    </div>

    <div class="card">
      <h3>lowercase</h3>
      <p>Original: {{ character.name }}</p>
      <p>Transformed: <span class="highlight">{{ character.name | lowercase }}</span></p>
      <p class="code-example"><code>{{ '{{' }} character.name | lowercase {{ '}}' }}</code></p>
    </div>

    <div class="card">
      <h3>titlecase</h3>
      <p>Original: {{ character.weapon }}</p>
      <p>Transformed: <span class="highlight">{{ character.weapon | titlecase }}</span></p>
      <p class="code-example"><code>{{ '{{' }} character.weapon | titlecase {{ '}}' }}</code></p>
    </div>
  </div>

  <div class="section">
    <h2>Date Pipes</h2>
    <div class="card">
      <h3>date</h3>
      <p>Original: {{ character.birthDate }}</p>
      <p>Short Date: <span class="highlight">{{ character.birthDate | date:'shortDate' }}</span></p>
      <p class="code-example"><code>{{ '{{' }} character.birthDate | date:'shortDate' {{ '}}' }}</code></p>
      <p>Medium Date: <span class="highlight">{{ character.birthDate | date:'mediumDate' }}</span></p>
      <p class="code-example"><code>{{ '{{' }} character.birthDate | date:'mediumDate' {{ '}}' }}</code></p>
      <p>Long Date: <span class="highlight">{{ character.birthDate | date:'longDate' }}</span></p>
      <p class="code-example"><code>{{ '{{' }} character.birthDate | date:'longDate' {{ '}}' }}</code></p>
      <p>Custom Format: <span class="highlight">{{ character.birthDate | date:'MMMM d, yyyy' }}</span></p>
      <p class="code-example"><code>{{ '{{' }} character.birthDate | date:'MMMM d, yyyy' {{ '}}' }}</code></p>
    </div>

    <div class="card">
      <h3>Current Date with Formats</h3>
      <p>Current Date: <span class="highlight">{{ currentDate | date }}</span></p>
      <p class="code-example"><code>{{ '{{' }} currentDate | date {{ '}}' }}</code></p>
      <p>Date & Time: <span class="highlight">{{ currentDate | date:'medium' }}</span></p>
      <p class="code-example"><code>{{ '{{' }} currentDate | date:'medium' {{ '}}' }}</code></p>
      <p>Time Only: <span class="highlight">{{ currentDate | date:'shortTime' }}</span></p>
      <p class="code-example"><code>{{ '{{' }} currentDate | date:'shortTime' {{ '}}' }}</code></p>
      <p>Custom Format (dd.MM.yyyy HH:mm): <span class="highlight">{{ currentDate | date:'dd.MM.yyyy HH:mm' }}</span>
      </p>
      <p class="code-example"><code>{{ '{{' }} currentDate | date:'dd.MM.yyyy HH:mm' {{ '}}' }}</code></p>
    </div>
  </div>

  <div class="section">
    <h2>Number Pipes</h2>
    <div class="card">
      <h3>number</h3>
      <p>Original: {{ character.age }}</p>
      <p>With Formatting: <span class="highlight">{{ character.age | number:'1.0-0' }}</span></p>
      <p class="code-example"><code>{{ '{{' }} character.age | number:'1.0-0' {{ '}}' }}</code></p>
    </div>

    <div class="card">
      <h3>decimal</h3>
      <p>Original: {{ elfAgeRatio }}</p>
      <p>With 3 Decimals: <span class="highlight">{{ elfAgeRatio | number:'1.3-3' }}</span></p>
      <p class="code-example"><code>{{ '{{' }} elfAgeRatio | number:'1.3-3' {{ '}}' }}</code></p>
    </div>

    <div class="card">
      <h3>percent</h3>
      <p>Original: {{ elfAgeRatio }}</p>
      <p>As Percent: <span class="highlight">{{ elfAgeRatio | percent }}</span></p>
      <p class="code-example"><code>{{ '{{' }} elfAgeRatio | percent {{ '}}' }}</code></p>
      <p>With 2 Decimals: <span class="highlight">{{ elfAgeRatio | percent:'1.2-2' }}</span></p>
      <p class="code-example"><code>{{ '{{' }} elfAgeRatio | percent:'1.2-2' {{ '}}' }}</code></p>
    </div>

    <div class="card">
      <h3>currency</h3>
      <p>Original: {{ weaponValue }}</p>
      <p>USD: <span class="highlight">{{ weaponValue | currency:'USD' }}</span></p>
      <p class="code-example"><code>{{ '{{' }} weaponValue | currency:'USD' {{ '}}' }}</code></p>
      <p>EUR: <span class="highlight">{{ weaponValue | currency:'EUR' }}</span></p>
      <p class="code-example"><code>{{ '{{' }} weaponValue | currency:'EUR' {{ '}}' }}</code></p>
      <p>GBP with 0 Decimals: <span class="highlight">{{ weaponValue | currency:'GBP':'symbol':'1.0-0' }}</span></p>
      <p class="code-example"><code>{{ '{{' }} weaponValue | currency:'GBP':'symbol':'1.0-0' {{ '}}' }}</code></p>
    </div>
  </div>

  <div class="section">
    <h2>Object & Array Pipes</h2>
    <div class="card">
      <h3>json</h3>
      <p>Character Object:</p>
      <pre>{{ character | json }}</pre>
      <p class="code-example"><code>{{ '{{' }} character | json {{ '}}' }}</code></p>
    </div>

    <div class="card">
      <h3>slice</h3>
      <p>First 3 Characters:</p>
      <pre>{{ characters | slice:0:3 | json }}</pre>
      <p class="code-example"><code>{{ '{{' }} characters | slice:0:3 | json {{ '}}' }}</code></p>
    </div>

    <div class="card">
      <h3>keyvalue</h3>
      <p>Character Properties:</p>
      <ul>
        <li *ngFor="let item of character | keyvalue">
          {{ item.key }}: <span class="highlight">{{ item.value }}</span>
        </li>
      </ul>
      <p class="code-example">
        <code>&lt;li *ngFor="let item of character | keyvalue"&gt;<br>
  {{ '{{' }} item.key {{ '}}' }}: {{ '{{' }} item.value {{ '}}' }}<br>
&lt;/li&gt;</code>
      </p>
    </div>
  </div>

  <div class="section">
    <h2>Async Pipe</h2>
    <div class="card">
      <h3>async</h3>
      <p>Loading character data asynchronously...</p>
      <pre>{{ character$ | async | json }}</pre>
      <p class="code-example"><code>{{ '{{' }} character$ | async | json {{ '}}' }}</code></p>
    </div>
  </div>

  <div class="section">
    <h2>Chaining Pipes</h2>
    <div class="card">
      <h3>Multiple Pipes</h3>
      <p>Original: {{ character.name }}</p>
      <p>Uppercase + Slice: <span class="highlight">{{ character.name | uppercase | slice:0:3 }}</span></p>
      <p class="code-example"><code>{{ '{{' }} character.name | uppercase | slice:0:3 {{ '}}' }}</code></p>
      <p>Date + Uppercase: <span class="highlight">{{ character.birthDate | date:'mediumDate' | uppercase }}</span></p>
      <p class="code-example"><code>{{ '{{' }} character.birthDate | date:'mediumDate' | uppercase {{ '}}' }}</code>
      </p>
    </div>
  </div>

  <div class="section">
    <h2>Boolean Pipes</h2>
    <div class="card">
      <h3>Ring Bearer Status</h3>
      <p>Is {{ character.name }} a Ring Bearer? <span class="highlight-boolean" [class.is-true]="character.ringBearer"
          [class.is-false]="!character.ringBearer">{{ character.ringBearer }}</span></p>
      <p>With Custom Pipe: <span class="highlight">{{ character.ringBearer | ringBearer }}</span></p>
      <p class="code-example"><code>{{ '{{' }} character.ringBearer | ringBearer {{ '}}' }}</code></p>
    </div>
  </div>

  <div class="section">
    <h2>Custom Pipes</h2>
    <div class="card">
      <h3>Race Icon Pipe</h3>
      <p>Original: {{ character.race }}</p>
      <p>With Race Icon: <span class="highlight">{{ character.race | raceIcon }}</span></p>
      <p class="code-example"><code>{{ '{{' }} character.race | raceIcon {{ '}}' }}</code></p>
    </div>
  </div>

  <div class="section">
    <h2>All Characters</h2>
    <div class="character-list">
      <div class="character-card" *ngFor="let char of characters" (click)="selectCharacter(char)"
        [class.selected]="char === character">
        <h3>{{ char.name | uppercase }}</h3>
        <p><strong>Race:</strong> {{ char.race | raceIcon }}</p>
        <p><strong>Age:</strong> {{ char.age | number }}</p>
        <p><strong>Weapon:</strong> {{ char.weapon }}</p>
        <p><strong>Ring Bearer:</strong> {{ char.ringBearer | ringBearer }}</p>
        <p><strong>Birth Date:</strong> {{ char.birthDate ? (char.birthDate | date:'longDate') : 'Unknown' }}</p>
      </div>
    </div>
  </div>

  <div class="section">
    <h2>Pure vs Impure Pipes Demo</h2>
    <div class="card">
      <h3>Pure vs Impure Pipe with Object Parameters</h3>
      <p>This example demonstrates how pure and impure pipes behave with object parameters.</p>

      <div class="pipe-demo">
        <div class="format-options">
          <h4>Format Options:</h4>
          <pre>{{ formatOptions | json }}</pre>
          <button (click)="changeFormatOptions()">Change Format Options</button>

        </div>

        <div class="results">
          <h4>Character Formatting Results:</h4>

          <div class="result-item">
            <p><strong>Pure Pipe:</strong></p>
            <p class="highlight">{{ character | characterFormatter:formatOptions }}</p>
            <p class="code-example"><code>{{ '{{' }} character | characterFormatter:formatOptions {{ '}}' }}</code></p>
            <p><small>This pipe will NOT update when you click "Change Format Options" because the object reference
                doesn't change.</small></p>
          </div>

          <div class="result-item">
            <p><strong>Impure Pipe:</strong></p>
            <p class="highlight-impure">{{ character | characterFormatterImpure:formatOptions }}</p>
            <p class="code-example">
              <code>{{ '{{' }} character | characterFormatterImpure:formatOptions {{ '}}' }}</code>
            </p>
            <p><small>This pipe WILL update when you click "Change Format Options" because it runs on every change
                detection cycle.</small></p>
          </div>

          <div class="explanation">
            <h4>Explanation:</h4>
            <p>The key difference between pure and impure pipes:</p>
            <ul>
              <li><strong>Pure pipes</strong> (default) only execute when the input reference changes</li>
              <li><strong>Impure pipes</strong> execute on every change detection cycle</li>
            </ul>
            <p>When you click "Change Format Options", we modify the existing object's properties without changing its
              reference. The pure pipe doesn't detect this change, but the impure pipe does.</p>
            <p>Check the console logs to see when each pipe is executed!</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <p>Created with Angular Pipes | Lord of the Rings Characters</p>
  </footer>
</div>